"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getCDSService = void 0;
const url_1 = require("url");
const ux_cds_compiler_facade_1 = require("@sap/ux-cds-compiler-facade");
/**
 * Creates CDS service structure.
 *
 * @param projectRoot - Absolute path of the project.
 * @param serviceName - Name of the CDS service.
 * @param clearCache - Flag indicating if the CDS file resolution cache should be cleared.
 * @returns CDS service structure.
 */
async function getCDSService(projectRoot, serviceName, clearCache = false) {
    const files = await (0, ux_cds_compiler_facade_1.getCdsFiles)(projectRoot, clearCache);
    const serviceFiles = files.map((uri) => {
        return { uri: (0, url_1.pathToFileURL)(uri).toString(), isReadOnly: uri.indexOf('node_modules') !== -1 };
    });
    return {
        type: 'cap-cds',
        serviceName,
        serviceFiles: serviceFiles
    };
}
exports.getCDSService = getCDSService;
//# sourceMappingURL=service.js.map