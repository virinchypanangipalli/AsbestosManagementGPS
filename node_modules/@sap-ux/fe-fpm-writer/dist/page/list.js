"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.generate = void 0;
const common_1 = require("./common");
const types_1 = require("./types");
/**
 * Enhances the provided list report configuration with default data.
 *
 * @param data - a list report configuration object
 * @param manifest - application manifest
 * @returns enhanced configuration
 */
function enhanceData(data, manifest) {
    const config = {
        ...data,
        settings: (0, common_1.initializeTargetSettings)(data, data.settings),
        name: types_1.PageType.ListReport,
        ...(0, common_1.getFclConfig)(manifest)
    };
    // set library dependencies
    config.libraries = (0, common_1.getLibraryDependencies)(types_1.PageType.ListReport);
    // use standard file name if i18n enhancement required
    if (config.settings.enhanceI18n === true) {
        config.settings.enhanceI18n = `i18n/custom${config.entity}${config.name}.properties`;
    }
    // move table settings into the correct structure
    if (config.settings.tableSettings) {
        config.settings.controlConfiguration ??= {};
        const controlConfig = config.settings.controlConfiguration;
        controlConfig['@com.sap.vocabularies.UI.v1.LineItem'] ??= {};
        controlConfig['@com.sap.vocabularies.UI.v1.LineItem'].tableSettings = config.settings.tableSettings;
        delete config.settings.tableSettings;
    }
    return config;
}
/**
 * Add a ListReport to an existing UI5 application.
 *
 * @param basePath - the base path
 * @param data - the object page configuration
 * @param fs - the memfs editor instance
 * @returns the updated memfs editor instance
 */
function generate(basePath, data, fs) {
    return (0, common_1.extendPageJSON)(basePath, data, enhanceData, 'page/list/manifest.json', fs);
}
exports.generate = generate;
//# sourceMappingURL=list.js.map